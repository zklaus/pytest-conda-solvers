{
  "$ref": "#/$defs/TestModule",
  "$defs": {
    "TestModule": {
      "title": "TestModule",
      "type": "object",
      "properties": {
        "tests": {
          "type": "array",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/SolveTestSpec"
              },
              {
                "$ref": "#/$defs/SolveForDiffTestSpec"
              },
              {
                "$ref": "#/$defs/DetermineConstrictingSpecsTestSpec"
              },
              {
                "$ref": "#/$defs/UnsatisfiableTestSpec"
              }
            ],
            "discriminator": {
              "propertyName": "kind",
              "mapping": {
                "solve": "#/$defs/SolveTestSpec",
                "solve_for_diff": "#/$defs/SolveForDiffTestSpec",
                "determine_constricting_specs": "#/$defs/DetermineConstrictingSpecsTestSpec",
                "unsatisfiable": "#/$defs/UnsatisfiableTestSpec"
              }
            }
          }
        }
      },
      "required": [
        "tests"
      ]
    },
    "SolveTestSpec": {
      "title": "SolveTestSpec",
      "type": "object",
      "properties": {
        "kind": {
          "enum": [
            "solve"
          ]
        },
        "name": {
          "type": "string"
        },
        "id": {
          "type": "string"
        },
        "provenance": {
          "type": "string"
        },
        "input": {
          "$ref": "#/$defs/TestInput"
        },
        "output": {
          "$ref": "#/$defs/TestOutput"
        },
        "test_function": {
          "type": "string",
          "default": "test_solve"
        }
      },
      "required": [
        "kind",
        "name",
        "id",
        "provenance",
        "input",
        "output"
      ],
      "additionalProperties": false
    },
    "TestInput": {
      "title": "TestInput",
      "type": "object",
      "properties": {
        "channels": {
          "anyOf": [
            {
              "$ref": "#/$defs/TestChannel"
            },
            {
              "type": "array",
              "items": {
                "$ref": "#/$defs/TestChannel"
              }
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "subdirs": {
          "anyOf": [
            {
              "$ref": "#/$defs/TestSubdir"
            },
            {
              "type": "array",
              "items": {
                "$ref": "#/$defs/TestSubdir"
              }
            }
          ]
        },
        "specs_to_add": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "prefix": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "history_specs": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "solution_records": {
          "anyOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/$defs/PrefixRecord"
              }
            },
            {
              "type": "null"
            },
            {
              "$ref": "#/$defs/PrefixRecord"
            }
          ],
          "default": null
        },
        "add_pip": {
          "type": "boolean",
          "default": false
        },
        "ignore_pinned": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "pinned_packages": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "aggressive_update_packages": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "auto_update_conda": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "update_modifier": {
          "anyOf": [
            {
              "$ref": "#/$defs/UpdateModifier"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "deps_modifier": {
          "anyOf": [
            {
              "$ref": "#/$defs/DepsModifier"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "channel_priority": {
          "anyOf": [
            {
              "$ref": "#/$defs/ChannelPriority"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "set_sys_prefix": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "override_cuda": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "override_glibc": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        }
      },
      "required": [],
      "additionalProperties": false
    },
    "TestChannel": {
      "title": "TestChannel",
      "enum": [
        "channel-1",
        "channel-2",
        "channel-4",
        "conda_format_repo",
        "test"
      ]
    },
    "TestSubdir": {
      "title": "TestSubdir",
      "enum": [
        "conda-test",
        "linux-64",
        "noarch"
      ]
    },
    "PrefixRecord": {
      "title": "PrefixRecord",
      "type": "object",
      "properties": {
        "record_type": {
          "enum": [
            "prefix"
          ]
        },
        "package_type": {
          "anyOf": [
            {
              "$ref": "#/$defs/PackageType"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "name": {
          "type": "string"
        },
        "version": {
          "type": "string"
        },
        "channel": {
          "type": "string"
        },
        "subdir": {
          "type": "string"
        },
        "fn": {
          "type": "string"
        },
        "build": {
          "type": "string",
          "default": "0"
        },
        "build_number": {
          "type": "integer",
          "default": 0
        },
        "paths_data": {
          "anyOf": [
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "files": {
          "anyOf": [
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "depends": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": []
        },
        "constrains": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": []
        }
      },
      "required": [
        "record_type",
        "name",
        "version",
        "channel",
        "subdir",
        "fn"
      ],
      "additionalProperties": false
    },
    "PackageType": {
      "title": "PackageType",
      "enum": [
        "noarch_generic",
        "noarch_python",
        "virtual_private_env",
        "virtual_python_egg_link",
        "virtual_python_egg_manageable",
        "virtual_python_egg_unmanageable",
        "virtual_python_wheel",
        "virtual_system"
      ]
    },
    "UpdateModifier": {
      "title": "UpdateModifier",
      "enum": [
        "freeze_installed",
        "specs_satisfied_skip_solve",
        "update_all",
        "update_deps",
        "update_specs"
      ]
    },
    "DepsModifier": {
      "title": "DepsModifier",
      "description": "Flags to enable alternate handling of dependencies.",
      "enum": [
        "no_deps",
        "not_set",
        "only_deps"
      ]
    },
    "ChannelPriority": {
      "title": "ChannelPriority",
      "enum": [
        "disabled",
        "flexible",
        "strict"
      ]
    },
    "TestOutput": {
      "title": "TestOutput",
      "type": "object",
      "properties": {
        "final_state": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "type": "null"
            }
          ],
          "default": null
        }
      },
      "required": [],
      "additionalProperties": false
    },
    "SolveForDiffTestSpec": {
      "title": "SolveForDiffTestSpec",
      "type": "object",
      "properties": {
        "kind": {
          "enum": [
            "solve_for_diff"
          ]
        },
        "name": {
          "type": "string"
        },
        "id": {
          "type": "string"
        },
        "provenance": {
          "type": "string"
        },
        "input": {
          "$ref": "#/$defs/TestInput"
        },
        "output": {
          "$ref": "#/$defs/DiffTestOutput"
        },
        "test_function": {
          "type": "string",
          "default": "test_solve_for_diff"
        }
      },
      "required": [
        "kind",
        "name",
        "id",
        "provenance",
        "input",
        "output"
      ],
      "additionalProperties": false
    },
    "DiffTestOutput": {
      "title": "DiffTestOutput",
      "type": "object",
      "properties": {
        "unlink_precs": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "link_precs": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "type": "null"
            }
          ],
          "default": null
        }
      },
      "required": [],
      "additionalProperties": false
    },
    "DetermineConstrictingSpecsTestSpec": {
      "title": "DetermineConstrictingSpecsTestSpec",
      "type": "object",
      "properties": {
        "kind": {
          "enum": [
            "determine_constricting_specs"
          ]
        },
        "name": {
          "type": "string"
        },
        "id": {
          "type": "string"
        },
        "provenance": {
          "type": "string"
        },
        "input": {
          "$ref": "#/$defs/TestInput"
        },
        "output": {
          "$ref": "#/$defs/DeterminingConstrictingSpecsTestOutput"
        },
        "test_function": {
          "type": "string",
          "default": "test_determine_constricting_specs"
        }
      },
      "required": [
        "kind",
        "name",
        "id",
        "provenance",
        "input",
        "output"
      ],
      "additionalProperties": false
    },
    "DeterminingConstrictingSpecsTestOutput": {
      "title": "DeterminingConstrictingSpecsTestOutput",
      "type": "object",
      "properties": {
        "constrictions": {
          "anyOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/$defs/Constriction"
              }
            },
            {
              "type": "null"
            }
          ],
          "default": null
        }
      },
      "required": [],
      "additionalProperties": false
    },
    "Constriction": {
      "title": "Constriction",
      "type": "object",
      "properties": {
        "package": {
          "type": "string"
        },
        "constricting_match_spec": {
          "type": "string"
        }
      },
      "required": [
        "package",
        "constricting_match_spec"
      ],
      "additionalProperties": false
    },
    "UnsatisfiableTestSpec": {
      "title": "UnsatisfiableTestSpec",
      "type": "object",
      "properties": {
        "kind": {
          "enum": [
            "unsatisfiable"
          ]
        },
        "name": {
          "type": "string"
        },
        "id": {
          "type": "string"
        },
        "provenance": {
          "type": "string"
        },
        "input": {
          "$ref": "#/$defs/TestInput"
        },
        "error": {
          "anyOf": [
            {
              "$ref": "#/$defs/UnsatisfiableTestError"
            },
            {
              "$ref": "#/$defs/ResolvePackageNotFoundTestError"
            },
            {
              "$ref": "#/$defs/SpecsConfigurationConflictTestError"
            }
          ],
          "discriminator": {
            "propertyName": "exception",
            "mapping": {
              "UnsatisfiableError": "#/$defs/UnsatisfiableTestError",
              "ResolvePackageNotFound": "#/$defs/ResolvePackageNotFoundTestError",
              "SpecsConfigurationConflictError": "#/$defs/SpecsConfigurationConflictTestError"
            }
          }
        },
        "test_function": {
          "type": "string",
          "default": "test_unsatisfiable"
        }
      },
      "required": [
        "kind",
        "name",
        "id",
        "provenance",
        "input",
        "error"
      ],
      "additionalProperties": false
    },
    "UnsatisfiableTestError": {
      "title": "UnsatisfiableTestError",
      "type": "object",
      "properties": {
        "exception": {
          "enum": [
            "UnsatisfiableError"
          ]
        },
        "entries": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "array",
              "items": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                ]
              }
            }
          ]
        }
      },
      "required": [
        "exception",
        "entries"
      ],
      "additionalProperties": false
    },
    "ResolvePackageNotFoundTestError": {
      "title": "ResolvePackageNotFoundTestError",
      "type": "object",
      "properties": {
        "exception": {
          "enum": [
            "ResolvePackageNotFound"
          ]
        },
        "entries": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "array",
              "items": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                ]
              }
            }
          ]
        }
      },
      "required": [
        "exception",
        "entries"
      ],
      "additionalProperties": false
    },
    "SpecsConfigurationConflictTestError": {
      "title": "SpecsConfigurationConflictTestError",
      "type": "object",
      "properties": {
        "exception": {
          "enum": [
            "SpecsConfigurationConflictError"
          ]
        },
        "requested_specs": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "array",
              "items": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                ]
              }
            }
          ]
        },
        "pinned_specs": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "array",
              "items": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                ]
              }
            }
          ]
        }
      },
      "required": [
        "exception",
        "requested_specs",
        "pinned_specs"
      ],
      "additionalProperties": false
    }
  }
}
